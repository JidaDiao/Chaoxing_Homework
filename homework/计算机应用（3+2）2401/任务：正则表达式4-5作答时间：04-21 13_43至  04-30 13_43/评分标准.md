### Samba服务器配置作业评分标准 (总分100分)

**说明:** 本次作业旨在考察Samba服务器的基础配置能力,包括网络设置、文件目录管理、用户管理、配置文件编写、权限分配及服务验证等核心环节。评分将综合考虑命令的正确性、配置的完整性及最终实现效果。

--- 

**题目一:背景介绍 (0分)**
- 此题为背景描述,无需作答,不计分。

**题目二:网络配置 (共15分)**
- **(5分)** Linux服务器IP配置:截图需清晰显示IP为 `192.168.10.1`,子网掩码为 `255.255.255.0` (或`/24`)。IP或掩码错误扣3分,未提交此项截图扣5分。
- **(5分)** Windows客户端IP配置:截图需清晰显示IP为 `192.168.10.40`,子网掩码为 `255.255.255.0`。IP或掩码错误扣3分,未提交此项截图扣5分。
- **(5分)** 虚拟机网络模式配置:截图需清晰显示网络适配器模式为“仅主机模式 (Host-only)”。模式选择错误或未提交此项截图扣5分。

**题目三:创建目录和文件 (共10分)**
- **(5分)** 创建目录:正确使用 `mkdir -p /abc/sales` 或分步 `mkdir` 命令。路径或命令错误扣5分。
- **(5分)** 创建文件:正确使用 `touch /abc/sales/姓名拼音.txt`。使用 `mkdir` 创建文件或文件名、路径不符要求扣3-5分。

**题目四:用户和组管理 (共15分)**
- **(3分)** 创建组:正确使用 `groupadd sales`。
- **(6分)** 创建系统用户并加入组:正确使用 `useradd -g sales sale1` 和 `useradd -g sales sale2`。每正确创建一个用户得3分。
- **(6分)** 添加Samba用户:正确使用 `smbpasswd -a sale1` 和 `smbpasswd -a sale2`。每正确添加一个用户得3分。命令拼写错误（如 `smbpassw`）酌情扣分。
- **注:** `passwd` 命令设置系统密码非本题强制要求,不作答不扣分。

**题目五:Samba主配置文件 (共20分)**
- **(4分)** 共享节名称:正确书写 `[sales]`。
- **(4分)** 路径配置:正确书写 `path = /abc/sales`。
- **(4分)** 用户访问控制:正确书写 `valid users = @sales` (或`write list = @sales`等能实现相同效果的配置),`@`符号至关重要。
- **(4分)** 基础属性配置:包含至少一项如 `writable = yes` 或 `browseable = yes` 的有效配置。
- **(4分)** 整体性:无重大语法错误（如拼写错误、缺少等号）,未将无关命令写入。只提交 `vim` 命令不得分。

**题目六:设置权限 (共15分)**
- **(7分)** 本地文件系统权限:必须正确设置目录属组 `chown :sales /abc/sales` (4分),并设置合理的读写权限 `chmod` (3分)。路径错误、属组错误或权限不合理将导致扣分。
- **(8分)** SELinux安全上下文:
    - 方法一（推荐）:使用 `chcon -t samba_share_t /abc/sales -R` 得8分。
    - 方法二（可用）:使用 `setenforce 0` 或 `setenforce permissive` 关闭或设为警告模式,得6分（因降低系统安全性）。
    - 未设置不得分。

**题目七:防火墙和Samba服务 (共10分)**
- **(5分)** 防火墙配置:正确使用 `firewall-cmd --permanent --add-service=samba` 及 `firewall-cmd --reload`。命令拼写错误（如`prmanent`、`samda`）或缺少重载命令将扣分。
- **(5分)** 服务管理:正确重启或启动并设为开机自启Samba服务（`smb`或`smbd`服务均可）。缺少重启/启动步骤或命令错误将扣分。

**题目八:客户端连接测试 (共15分)**
- **(7.5分)** 挂载成功截图:需提交Windows资源管理器中网络驱动器成功映射的截图。未提交扣7.5分。
- **(7.5分)** 文件可见性截图:需打开映射的驱动器,截取能够看到在题目三中创建的个人姓名txt文件的截图。看不到文件或未提交此截图扣7.5分。